# EvaTeam Workflow Enhancer

Этот пользовательский скрипт (UserScript) для Tampermonkey улучшает визуализацию диаграмм workflow в системе управления проектами EvaTeam. Заменяет стандартное отображение бизнес-процесса на более современное и интерактивное решение с использованием SvelteFlow.

## Особенности

- **Современный UI**: Преобразует статические диаграммы workflow в интерактивные
- **Улучшенный UX**: Добавляет функциональность перетаскивания элементов
- **Сохранение настроек**: Сохраняет пользовательские настройки в localStorage
- **Совместимость**: Поддерживает переключение между старой и новой версиями

## Технологии

- **JavaScript/ES6+**: Язык программирования
- **SvelteFlow**: Библиотека для интерактивных диаграмм
- **Svelte 5**: Фреймворк для построения пользовательских интерфейсов
- **Vite**: Инструмент сборки для разработки и продакшена
- **DOM API**: Для взаимодействия с существующим DOM EvaTeam
- **localStorage**: Для сохранения пользовательских настроек
- **MutationObserver**: Для отслеживания изменений DOM

## Установка

1. Установите расширение Tampermonkey в вашем браузере
2. Скопируйте содержимое файла `dist/evateam-workflow-enhance.user.js` в новый скрипт Tampermonkey
3. Сохраните скрипт

## Разработка

### Режим разработки

Для целей разработки используйте Vite сервер:

1. Установите зависимости: `npm install`
2. Запустите сервер разработки: `npm run dev`
3. Откройте http://localhost:3000 в браузере
4. Проверьте функциональность в режиме разработки
5. Откройте консоль разработчика (F12)
6. Проверьте логи: "HuEvaFlowEnhancer: ..."

### Сборка

Для окончательной сборки UserScript используйте команду:

```bash
npm run build-userscript
```

Результат: dist/evateam-workflow-enhance.user.js (готов к установке)

Для сборки веб-приложения используйте команду:

```bash
npm run build
```

Результат: файлы в директории dist/

## Архитектура

### src/HuEvaApi.js
Класс для взаимодействия с API EvaTeam, обеспечивает получение данных workflow, статусов и переходов.

### src/HuEvaFlowEnhancer.js
Основной класс для обработки данных workflow, парсинга HTML, извлечения узлов и ребер, управления состоянием приложения.

### src/main.js
Точка входа для приложения, объединяет все компоненты.

### dev/index.html
Файл для разработки и тестирования функциональности без установки Tampermonkey.

## Требования к коду

- Все комментарии в коде и документации должны быть на английском языке
- Русский язык допускается только в интерфейсе
- Подробные логи с префиксом "HuEvaFlowEnhancer:"
- Использование camelCase для переменных и функций
- Объектно-ориентированный подход с модульной организацией
- Проверка исключений и подробные сообщения об ошибках